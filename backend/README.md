# Backend Project

This project is a simple backend application built using the Gin framework in Go.

## Get Started

1. **Set up environment variables:**

Create a `.env` file in the root directory based on the `.env.example` file and fill in the required values.

```
cp .env.example .env
```

2. **Install dependencies:**

```
go mod tidy
```

3. **Run the application:**

```
go run .
```

Once the application is running, visit the `:8080` port to access endpoints.

## Coding Guidelines

### Golang and Gin

- Follow [Go Style](https://google.github.io/styleguide/go/).
- Use Golang best practices.
- Use Gin best practices.

## File/Folder Structure

```
backend
├── controllers       # Contains the controller logic
│   └── controller.go
├── db                # Database connection and operations
│   ├── migrations    # Database migration files
│   └── query         # SQL queries generated by sqlc
├── routes            # Defines the application routes
│   └── routes.go
├── models            # Contains data structures and methods
│   └── model.go
├── middleware        # Middleware functions for the application
│   └── middleware.go
├── .env              # Environment variables
├── .env.example      # Example environment variables
├── go.mod            # Module definition file
├── go.sum            # Dependency checksums
├── main.go           # Entry point of the application
└── README.md         # Project documentation
```

## Database

This project uses a PostgreSQL database.

This project uses [golang-migrate](https://github.com/golang-migrate/migrate) for database migrations, [sqlc](https://sqlc.dev/) for type-safe SQL queries, and [pgx](https://github.com/jackc/pgx) as the database driver.

### Creating Migrations

To create a new migration, use the following command:

```sh
migrate create -ext sql -dir db/migrations -seq <migration_name>
```

### Running Migrations

Migrate up to the latest version:

```sh
source .env
migrate -path db/migrations -database $DATABASE_URL up
```

Migrate down (rollback) one version:

```sh
source .env
migrate -path db/migrations -database $DATABASE_URL down 1
```

## Session Management

This project uses [sessions](https://github.com/gin-contrib/sessions) package for session management.  
In the current implementation, uses the cookie-based session store.

### Configuring Cookie Store

To configure the cookie store, set the `SESSION_SECRET` environment variable in your `.env` file. This secret is used to sign and encrypt the session cookies.

Example for generating a random secret:

```sh
openssl rand -base64 32
```
